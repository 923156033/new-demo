<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>图片裁剪</title>
<#include "../../liger.html"/>
<script src="${base}/skin/comm/js/jquery-1.8.3.js" type="text/javascript"></script>
<script src="${base}/skin/comm/js/jquery.Jcrop.js" type="text/javascript"></script>
<script src="${base}/skin/comm/js/jquery.color.js" type="text/javascript"></script>
<script src="${base}/skin/comm/js/autoZoomLoadImage.js" type="text/javascript"></script>
<link rel="stylesheet" href="${base}/skin/comm/css/jquery.Jcrop.css" type="text/css" />
<script type="text/javascript">
$(function(){
	  $('#target').Jcrop({
	    onSelect: updateCoords,
	    onDblClick: s
	  });
});

  function s(){
	  $.post("../o_cut_img.do",{
		  "path":"${imgUrl!}",
		  "x":$("#x").val(),
		  "y":$("#y").val(),
		  "width":$('#w').val(),
		  "height":$('#h').val()
		},function(data){
			ld.close();
			$("#aimg${i}").attr("src","${base}"+data);
			$("#aimg${i}").autoZoomLoadImage(150, 150);
			$("#aimgpath${i}").val(data);
		},"text");
  }

  function updateCoords(c){
	  $('#x').val(c.x);
	  $('#y').val(c.y);
	  $('#w').val(c.w);
	  $('#h').val(c.h);
  };
</script>
</head>
<body>
<img src="${base}${imgUrl!}" id="target" alt="[Jcrop Example]"/>
    <input type="hidden" name="path" id="path" value="${imgUrl!}"/>
    <input type="hidden" id="x" name="x">
    <input type="hidden" id="y" name="y">
    <input type="hidden" id="w" name="width">
    <input type="hidden" id="h" name="height">"
</body>
</html>